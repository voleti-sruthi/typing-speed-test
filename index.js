const paragraphsQuotes = [
    "Their politician was, in this moment, a notour paperback. The first armless grouse is, in its own way, a gear. The coat is a wash. However, a cake is the llama of a caravan. Snakelike armies show us how playgrounds can be viscoses. Framed in a different way, they were lost without the fatal dogsled that composed their waitress. Far from the truth, the cockney freezer reveals itself as a wiggly tornado to those who look. The first hawklike sack.",
    "Authors often misinterpret the lettuce as a folklore rabbi, when in actuality it feels more like an uncursed bacon. Pursued distances show us how mother-in-laws can be charleses. Authors often misinterpret the lion as a cormous science, when in actuality it feels more like a leprous lasagna. Recent controversy aside, their band was, in this moment, a racemed suit. The clutch of a joke becomes a togaed chair. The first pickled chess is.",
    "In modern times the first scrawny kitten is, in its own way, an input. An ostrich is the beginner of a roast. An appressed exhaust is a gun of the mind. A recorder is a grade from the right perspective. A hygienic is the cowbell of a skin. Few can name a dun brazil that isn't a highbrow playroom. The unwished beast comes from a thorny oxygen. An insured advantage's respect comes with it the thought that the lucid specialist is a fix.",
    "What we don't know for sure is whether or not a pig of the coast is assumed to be a hardback pilot. The literature would have us believe that a dusky clave is not but an objective. Few can name a limbate leo that isn't a sunlit silver. The bow is a mitten. However, the drawer is a bay. If this was somewhat unclear, few can name a paunchy blue that isn't a conoid bow. The undrunk railway reveals itself as a downstage bamboo to those who look.",
    "An aunt is a bassoon from the right perspective. As far as we can estimate, some posit the melic myanmar to be less than kutcha. One cannot separate foods from blowzy bows. The scampish closet reveals itself as a sclerous llama to those who look. A hip is the skirt of a peak. Some hempy laundries are thought of simply as orchids. A gum is a trumpet from the right perspective. A freebie flight is a wrench of the mind. Some posit the croupy.",
    "A baby is a shingle from the right perspective. Before defenses, collars were only operations. Bails are gleesome relatives. An alloy is a streetcar's debt. A fighter of the scarecrow is assumed to be a leisured laundry. A stamp can hardly be considered a peddling payment without also being a crocodile. A skill is a meteorology's fan. Their scent was, in this moment, a hidden feeling. The competitor of a bacon becomes a boxlike cougar.",
    "A broadband jam is a network of the mind. One cannot separate chickens from glowing periods. A production is a faucet from the right perspective. The lines could be said to resemble zincoid females. A deborah is a tractor's whale. Cod are elite japans. Some posit the wiglike norwegian to be less than plashy. A pennoned windchime's burst comes with it the thought that the printed trombone is a supply. Relations are restless tests.",
    "In recent years, some teeming herons are thought of simply as numbers. Nowhere is it disputed that an unlaid fur is a marble of the mind. Far from the truth, few can name a glossy lier that isn't an ingrate bone. The chicken is a giraffe. They were lost without the abscessed leek that composed their fowl. An interviewer is a tussal bomb. Vanward maracas show us how scarfs can be doubts. Few can name an unguled punch that isn't pig.",
    "A cough is a talk from the right perspective. A designed tractor's tray comes with it the thought that the snuffly flax is a rainbow. Their health was, in this moment, an earthy passbook. This could be, or perhaps the swordfishes could be said to resemble healthy sessions. A capricorn is a helium from the right perspective. However, a sled is a mailman's tennis. The competitor of an alarm becomes a toeless raincoat. Their twist was, in this moment.",
    "Authors often misinterpret the flag as a wayless trigonometry, when in actuality it feels more like a bousy gold. Few can name a jasp oven that isn't a stutter grape. They were lost without the huffy religion that composed their booklet. Those waves are nothing more than pedestrians. Few can name a quartered semicolon that isn't a rounding scooter. Though we assume the latter, the literature would have us believe.",
    "This could be, or perhaps few can name a pasteboard quiver that isn't a brittle alligator. A swordfish is a death's numeric. Authors often misinterpret the mist as a swelling asphalt, when in actuality it feels more like a crosswise closet. Some posit the tonal brother-in-law to be less than newborn. We know that the sizes could be said to resemble sleepwalk cycles. Before seasons, supplies were only fighters. Their stew was, in this moment.",
    "The vision of an attempt becomes a lawny output. Dibbles are mis womens. The olden penalty reveals itself as a bustled field to those who look. Few can name a chalky force that isn't a primate literature. However, they were lost without the gamy screen that composed their beret. Nowhere is it disputed that a step-uncle is a factory from the right perspective. One cannot separate paints from dreary windows. What we don't know for sure is whether.",
    "A tramp is a siamese from the right perspective. We know that a flitting monkey's jaw comes with it the thought that the submersed break is a pamphlet. Their cream was, in this moment, a seedy daffodil. The nest is a visitor. Far from the truth, they were lost without the released linen that composed their step-sister. A vibraphone can hardly be considered a pardine process without also being an archaeology. The bay of a hyacinth becomes.",
    "The frosts could be said to resemble backstage chards. One cannot separate colleges from pinkish bacons. Far from the truth, the mom of a rooster becomes a chordal hydrogen. A tempo can hardly be considered a purer credit without also being a pajama. The first combined ease is, in its own way, a pantyhose. Extending this logic, the guides could be said to resemble reddest monkeies. Framed in a different way, an addle hemp is a van.",
    "Far from the truth, an ajar reminder without catamarans is truly a foundation of smarmy semicircles. An alike board without harps is truly a satin of fated pans. A hubcap sees a parent as a painful beautician. The zeitgeist contends that some intense twigs are thought of simply as effects. A cross is a poppied tune. The valanced list reveals itself as an exchanged wrist to those who look. Recent controversy aside.",
    ];
const paragraphsWords = [
    "their politician was in this moment a notour paperback the first armless grouse is in its own way a gear the coat is a wash however a cake is the llama of a caravan snakelike armies show us how playgrounds can be viscoses framed in a different way they were lost without the fatal dogsled that composed their waitress far from the truth the cockney freezer reveals itself as a wiggly tornado to those who look the first hawklike sack",
    "authors often misinterpret the lettuce as a folklore rabbi when in actuality it feels more like an uncursed bacon pursued distances show us how can be charleses authors often misinterpret the lion as a cormous science when in actuality it feels more like a leprous lasagna recent controversy aside their band was in this moment a racemed suit the clutch of a joke becomes a togaed chair the first pickled chess is",
    "in modern times the first scrawny kitten is in its own way an input an ostrich is the beginner of a roast an appressed exhaust is a gun of the mind a recorder is a grade from the right perspective a hygienic is the cowbell of a skin few can name a dun brazil that is not a highbrow playroom the unwished beast comes from a thorny oxygen an insured advantages respect comes with it the thought that the lucid specialist is a fix",
    "what we do not know for sure is whether or not a pig of the coast is assumed to be a hardback pilot the literature would have us believe that a dusky clave is not but an objective few can name a limbate leo that is not a sunlit silver the bow is a mitten however the drawer is a bay if this was somewhat unclear few can name a paunchy blue that is not a conoid bow the undrunk railway reveals itself as a downstage bamboo to those who look",
    "an aunt is a bassoon from the right perspective as far as we can estimate some posit the melic myanmar to be less than kutcha one cannot separate foods from blowzy bows the scampish closet reveals itself as a sclerous llama to those who look a hip is the skirt of a peak some hempy laundries are thought of simply as orchids a gum is a trumpet from the right perspective a freebie flight is a wrench of the mind some posit the croupy",
    "a baby is a shingle from the right perspective before defenses collars were only operations bails are gleesome relatives an alloy is a streetcars debt a fighter of the scarecrow is assumed to be a leisured laundry a stamp can hardly be considered a peddling payment without also being a crocodile a skill is a meteorologys fan their scent was in this moment a hidden feeling the competitor of a bacon becomes a boxlike cougar",
    "a broadband jam is a network of the mind one cannot separate chickens from glowing periodsa a production is a faucet from the right perspective the lines could be said to resemble zincoid females a deborah is a tractors whale cod are elite japans some posit the wiglike norwegian to be less than plashy a pennoned windchimes burst comes with it the thought that the printed trombone is a supply relations are restless tests",
    "in recent years some teeming herons are thought of simply as numbers nowhere is it disputed that an unlaid fur is a marble of the mind far from the truth few can name a glossy lier that is not an ingrate bone the chicken is a giraffe they were lost without the abscessed leek that composed their fowl an interviewer is a tussal bomb vanward maracas show us how scarfs can be doubts few can name an unguled punch that is not pig",
    "a cough is a talk from the right perspectivea a designed tractors tray comes with it the thought that the snuffly flax is a rainbow their health was in this moment an earthy passbook this could be or perhaps the swordfishes could be said to resemble healthy sessions a capricorn is a helium from the right perspective however a sled is a mailmans tennis the competitor of an alarm becomes a toeless raincoat their twist was in this moment",
    "authors often misinterpret the flag as a wayless trigonometry when in actuality it feels more like a bousy gold few can name a jasp oven that is not a stutter grape they were lost without the huffy religion that composed their booklet those waves are nothing more than pedestrians few can name a quartered semicolon that is not a rounding scooter though we assume the latter the literature would have us believe",
    "far from the truth an ajar reminder without catamarans is truly a foundation of smarmy semicircles an alike board without harps is truly a satin of fated pans a hubcap sees a parent as a painful beautician the zeitgeist contends that some intense twigs are thought of simply as effects a cross is a poppied tune the valanced list reveals itself as an exchanged wrist to those who look recent controversy aside",
    "the hefty opinion reveals itself as a sterile peer to peer to those who look this could be or perhaps the watch of a diamond becomes a bosom baboon in recent years some posit the unstuffed road to be less than altern it is an undeniable fact really the livelong lettuce reveals itself as an unstuffed soda to those who look in ancient times a bit is a balances season the popcorn of a morning becomes a moonless beauty",
    "if this was somewhat unclear a friend is a fridge from the right perspective an upset carriage is a stitch of the mind to be more specific a temper is a pair from the right perspectivea authors often misinterpret the liquid as a notchy baseball when in actuality it feels more like an unbarbed angle though we assume the latter the first vagrom report is in its own way a tower we know that the octopus of a cd becomes an unrent dahlia",
    "a reptant discussions rest comes with it the thought that the condemned syrup is a wish the drake of a wallaby becomes a sonant harp if this was somewhat unclear spotty children show us how technicians can be jumps their honey was in this moment an intime direction a ship is the lion of a hate they were lost without the croupous jeep that composed their lily in modern times a butcher of the birth is assumed to be a spiral bean",
    "those cowbells are nothing more than elements this could be or perhaps before stockings thoughts were only opinions a coil of the exclamation is assumed to be a hurtless toy a board is the cast of a religion in ancient times the first stinko sailboat is in its own way an exchange few can name a tutti channel that is not a footless operation extending this logic an oatmeal is the rooster of a shake those step sons are nothing more than matches",
]

const paragraphsNumbers = [
    "between 8404 5777 around these find show while become life thing 1 such could need very some more may plan he person man system turn down general leave course see or work order head on place never begin increase 9 open seem one 6235 do get fact 9926 lost without the fatal dogsled that composed their 97 waitress far from the truth the cockney freezer reveals 200 itself as a wiggly 9 tornado to those who look the 2001 first hawklike sack",
    "a broadband jam is a network 2023 of the mind one cannot 7 separate chickens from glowing periodsa a production is a faucet 673 from the right perspective 98 the lines could be said to resemble zincoid females 215 a deborah is a tractors whale cod are elite japans some 7 posit the wiglike norwegian to be less than plashy a pennoned windchimes 2200 89076 burst comes with it the thought that the printed 3405 trombone is a supply relations are restless tests",
    "house increase between through come must or use line part because may give tell 17 the great small real up because 5167 use through those fact 99 64 before see play can house fact one world by school part look it might most first 533 last turnball 3588 make set off many play as few take 6237 other govern on most in 378 time never over such or 9 eye other go against word play little fact for should with more 506 690 36 large open into say real will show could problem",
    "general consider know should 87 part in 8 will of have that leave then do find he man consider also 2 hold that take school want time school mean few no but who same ask 15 get where you program no people about find must than find like no one have know during great keep he will run see those off as interest and the feel go however she last long with play 14 people large again small however come turn interest point present tell run develop call before this most ask which 30 present",
    "between into show back do 432 work 9537 home then system early both general give 393 by open never to great world hand and 1435 state program want back over move keep this place say word 7809 307 make present say child because which under large leven 88 no world will have word which with person off head over program seem however come get against 9 while child another to change against 579 since hand world he all part little begin another many you then hand it fact first those",
    "at out where both then 4914 state govern group use late about who nation school however any look form keep order back now state 40 home keep first 41 7 many go by 525 like large into for begin end world home part what say general however at down however end people eye around face take ask a and at all so old he 291 after between where 55 the there lead should same be these he can by system which move between the 91 if very by most out the home you could who plan other go 455",
    "however end people eye around face take ask a and at all so old he 291 after between where 55 the there lead should same be these he can by system which move between the 91 if very by most out the home you could who plan other go 455 year give will then hold you year even develop write any develop good these 8221 could not keep no late tell some as however 5 with line keep and turn person one need no hold little with 352 man take 7 keep want give right system 8 eye part by",
    "hold form house 21 group house each 3 program hold no there late out would well move also school before only show should without early would around point problem also then during first all even 99 this govern on where very go and 8 make then thing 701 public work open turn last person 17 while we number course 284 before own so do feel number 35 any 885 like should most possible life head child come people still open he 95 some might 1861 after little back lead keep we under course problem",
    "find during 2983 end on should time from old little last line or well not follow own thing so high person number again great follow begin 2889 when about 8 group order form take 18 go 128 through where just when open how like feel well 9599 such 26 now find during 2983 end on should time from old little last line or well not follow own thing so high person number again great follow begin 2889 when about 8 group order form take 18 go 128 through where just when open how like feel well 9599 such 26 now",
    "all never we consider large system against seem know possible give know call 789 through then last think so we fact good first early many 62 still way more real still if with right large state want keep she 6956 small through for system set up those house play 7 course group 5783 as seem group mean year most leave begin set hold 1888 eye hand or head 4 only fact early again child look call program who 5 never consider good know without come man since to know word on 7 such stand"
]
const paragraphsPunctuations=[
    "Hand down, also so get, group through never same both; world head another any who most, she great no, use there, just help child, still people but for much man, might need some word come new never. Do these turn won't new. Great \"find\" to. This Person (eye) year find be? House govern by, word know. Use last you over, line hand these person. Late such, order under. She might feel same general old mustn't keep high world see place still small see should large group point face man. Child - right!",
    "Must however off form play, look first: long, at must! As call, of after, give early open great home. Around turn use, I over hand off, word change when between same plan open not by govern call leave not could last, under shouldn't change bay become get state. Possible would, move go few, under person 'would' of! Any system between use I too before. Develop those way small get? Last child that way time, again but wouldn't fact many? Consider through lead head. After between here",
    "One hand: turn! More do however show in follow. However again take be - person out many see think, leave more; might, new last while face old during way? Tell school govern, a change, where do How public. Eye I develop line large: many. She have Those fact, each down, the time then that. School thing, need open long so only While because like. For person here those day: move no, use would play, year small who. By thing possible much, than more only becausebetween point than time face.",
    "Those fact, each down, the time then that. School thing, need open long so only While because like. For person here those day: move no, use would play, year small who. By thing possible much, than more only becausebetween point than time face Even how such order up. Seem end would where come at. 'She so, old never right feel you hand; hold give, but \"while\" life, last of out. Keep of from thing time, before don't good number such again plan as there number because. Man on plan first.",
    "She few, both these follow. Very as mustn't form, so up: just, school this get keep, seem same, turn of change run, which change use. If head; which thing at, than few possible group, do set nation. Under even with public come those few begin To into, about this however. A look set what take the, other life against such would while (home) who, say or might hold general take point very more much also could no real first even such run one these use. Early set off only we possible!",
    "Tell real. Course number. Man get can't home but; hand, might first. School this get or hold. Problem of, how there hand last state make only over write person change problem set, open might, for great only little hold might, that all want, Seem should; old both thing, on than state some, can't think, place man time consider she, order present, own home know. Both (play) small it do, never large use, these this, get out. On by much very, before I world: all by become, you go."
]
const typingText = document.querySelector(".typing-text p")
const inpField = document.querySelector(".wrapper .input-field")
const tryAgainBtn = document.querySelector(".content button")
const timeTag = document.querySelector(".time span b")
const mistakeTag = document.querySelector(".mistake span")
const wpmTag = document.querySelector(".wpm span")
const cpmTag = document.querySelector(".cpm span")
var wpm;

let timer;
var maxTime;
var timeLeft;
let charIndex = mistakes = isTyping = permistake=0;
var ranIndex;
var paragraphChoosen;
var multiplicationFactor;

function initial(value) {
    for(var j=0;j<=3;j++){
            if(value == document.getElementsByClassName("diff")[j].value){
                document.getElementsByClassName("diff")[j].classList.add("activeDiff");
            }
            else{
                document.getElementsByClassName("diff")[j].classList.remove("activeDiff");
            }
    }
    if(value == "Words"){
        ranIndex = Math.floor(Math.random() * paragraphsWords.length);
        paragraphChoosen = paragraphsWords[ranIndex];
    }
    else if(value == "Numbers"){
        ranIndex = Math.floor(Math.random() * paragraphsNumbers.length);
        paragraphChoosen = paragraphsNumbers[ranIndex];
    }
    else if(value == "Quotes"){
        ranIndex = Math.floor(Math.random() * paragraphsQuotes.length);
        paragraphChoosen = paragraphsQuotes[ranIndex];
    }
    else{
        ranIndex = Math.floor(Math.random() * paragraphsPunctuations.length);
        paragraphChoosen = paragraphsPunctuations[ranIndex];
    }
    
}
function initialTime(value){
    for(var j=0;j<=3;j++){
        if(value == document.getElementsByClassName("timeItem")[j].value){
            document.getElementsByClassName("timeItem")[j].classList.add("activeTime");
        }
        else{
            document.getElementsByClassName("timeItem")[j].classList.remove("activeTime");
        }
    }
    maxTime = value;
    timeLeft = maxTime;
    timeTag.innerText = timeLeft;
    multiplicationFactor = 60/value;
}
function startTest(){
    document.getElementsByClassName("wrapper")[0].classList.toggle("dispNone");
    document.getElementsByClassName("container")[0].classList.toggle("dispNone");
    typingText.innerHTML = "";
    paragraphChoosen.split("").forEach(char => {
        console.log(char);
        let span = `<span>${char}</span>`
        typingText.innerHTML += span;
    });
    typingText.querySelectorAll("span")[0].classList.add("active");
    document.addEventListener("keydown", () => inpField.focus());
    typingText.addEventListener("click", () => inpField.focus());
}
function initTyping() {
    let characters = typingText.querySelectorAll("span");
    let typedChar = inpField.value.split("")[charIndex];
    if (charIndex < characters.length - 1 && timeLeft > 0) {
        if (!isTyping) {
            timer = setInterval(initTimer, 1000);
            isTyping = true;
        }
        if (typedChar == null) {
            if (charIndex > 0) {
                charIndex--;
                if (characters[charIndex].classList.contains("incorrect")) {
                    mistakes--;
                }
                characters[charIndex].classList.remove("correct", "incorrect");
            }
        } else {
            if (characters[charIndex].innerText == typedChar) {
                characters[charIndex].classList.add("correct");
            } else {
                mistakes++;
                permistake++;
                characters[charIndex].classList.add("incorrect");
            }
            charIndex++;
        }
        characters.forEach(span => span.classList.remove("active"));
        characters[charIndex].classList.add("active");

        let wpm = Math.round((((charIndex - mistakes) / 5) / (maxTime - timeLeft))*60);
        wpm = wpm < 0 || !wpm || wpm == Infinity ? 0: wpm;
        wpmTag.innerText = wpm;
        mistakeTag.innerText = mistakes;
        cpmTag.innerText = (((charIndex - mistakes)/charIndex)*100).toFixed(2) + "%";
    } else {
        
        inpField.value = "";
        clearInterval(timer);
    }
}

function initTimer() {
    if (timeLeft > 0) {
        timeLeft--;
        timeTag.innerText = timeLeft;
    } else {
        clearInterval(timer);
    }
}

function resetGame() {
    location.reload();
}

inpField.addEventListener("input", initTyping);
tryAgainBtn.addEventListener("click", resetGame);